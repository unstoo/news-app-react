(this["webpackJsonpnews-app"]=this["webpackJsonpnews-app"]||[]).push([[0],{46:function(e,t,c){},47:function(e,t,c){},48:function(e,t,c){},49:function(e,t,c){},54:function(e,t,c){},55:function(e,t,c){},56:function(e,t,c){},57:function(e,t,c){},77:function(e,t,c){"use strict";c.r(t);var n=c(1),i=c.n(n),r=c(11),s=c.n(r),a=c(8),l=c(2),o=c(14),d=c(29),j=c(30),u=c(35),b=c(34),h=c(0),O=function(e){Object(u.a)(c,e);var t=Object(b.a)(c);function c(e){var n;return Object(d.a)(this,c),(n=t.call(this,e)).state={hasError:!1},n}return Object(j.a)(c,[{key:"componentDidCatch",value:function(){}},{key:"render",value:function(){var e=this.props,t=this.state;return t.hasError?Object(h.jsxs)(h.Fragment,{children:[Object(h.jsx)("h1",{children:"Sorry, something went wrong"}),Object(h.jsx)("pre",{children:JSON.stringify(t)})]}):e.children}}],[{key:"getDerivedStateFromError",value:function(e){return{hasError:!0,error:e}}}]),c}(n.Component);O.defaultProps={children:[]};var p=O,f=(c(46),c(7)),x=(c(47),{weekday:"long",year:"numeric",month:"short",day:"numeric"}),m=function(e){return e.split(" - ").slice(0,1).join("")},v=(c(48),function(e){var t=e.item,c=e.clickHandler,n=e.url;return Object(h.jsx)(h.Fragment,{children:Object(h.jsx)("li",{className:"NewsListItem",children:Object(h.jsxs)("article",{children:[Object(h.jsx)("div",{className:"NewsListItem__image-large",children:Object(h.jsx)("img",{src:t.urlToImage||"https://upload.wikimedia.org/wikipedia/commons/6/65/No-Image-Placeholder.svg",alt:"","data-testid":"img1"})}),Object(h.jsxs)("div",{className:"NewsListItem__details",children:[Object(h.jsxs)("div",{className:"NewsListItem__image-small",children:[Object(h.jsx)("img",{src:t.urlToImage||"https://upload.wikimedia.org/wikipedia/commons/6/65/No-Image-Placeholder.svg",alt:"","data-testid":"img2"}),Object(h.jsx)("h1",{children:m(t.title)})]}),Object(h.jsxs)("div",{className:"NewsListItem__misc",children:[Object(h.jsx)("div",{children:t.source.name}),Object(h.jsx)("time",{dateTime:t.publishedAt,children:new Date(t.publishedAt).toLocaleString("en-US",x)})]}),Object(h.jsx)("p",{children:t.description}),Object(h.jsx)("a",{href:n,onClick:function(e){e.preventDefault(),c()},children:"Read more"})]})]})})})}),g=(c(49),function(e){var t=e.list,c=Object(l.g)();return Object(h.jsxs)("ul",{className:"NewsList",children:[0!==t.length&&t.map((function(e){return Object(h.jsx)(v,{item:e,clickHandler:function(){c.push("/".concat(e.id))},url:"/".concat(e.id)},e.publishedAt+e.title)})),!t.length&&Object(h.jsx)("div",{"data-testid":"no-articles",children:"No articles found."})]})}),w=(c(54),function(e){var t=e.item,c=e.handler;return Object(h.jsxs)("article",{className:"NewsArticle",children:[Object(h.jsx)("h1",{children:m(t.title)}),Object(h.jsx)("img",{src:t.urlToImage||"https://upload.wikimedia.org/wikipedia/commons/6/65/No-Image-Placeholder.svg",alt:"",width:"25%","data-testid":"img"}),Object(h.jsx)("div",{children:new Date(t.publishedAt).toLocaleString("en-US",x)}),Object(h.jsx)("div",{children:t.source.name}),Object(h.jsx)("p",{children:t.content}),Object(h.jsx)("button",{onClick:c,type:"button",children:"Back"})]})}),y=(c(55),function(e){var t=e.list,c=e.label,n=e.handler,i=e.selected,r=c;return Object(h.jsxs)("div",{className:"DropDown",children:[Object(h.jsx)("select",{value:i,name:r,onChange:function(e){n(e.target.value)},"data-testid":"select",children:Object(h.jsx)("optgroup",{children:[""].concat(Object(f.a)(t)).map((function(e){return Object(h.jsxs)("option",{value:e,children:[e&&e,!e&&"Choose source..."]},e)}))})}),i&&Object(h.jsx)("button",{type:"button",title:"Clear source",onClick:function(){n("")},children:"\ud83d\uddd9"})]})});y.defaultProps={selected:""};var N=y,S=(c(56),function(e){var t=e.handler,c=e.title;return Object(h.jsxs)("div",{className:"Input",children:[Object(h.jsx)("input",{onChange:function(e){t(e.target.value)},type:"text",value:c,placeholder:"Search by title","data-testid":"input"}),c&&Object(h.jsx)("button",{type:"button",title:"Clear input",onClick:function(){t("")},children:"\ud83d\uddd9"})]})}),_=(c(57),function(){return Object(h.jsxs)("div",{className:"lds-default",children:[Object(h.jsx)("div",{}),Object(h.jsx)("div",{}),Object(h.jsx)("div",{}),Object(h.jsx)("div",{}),Object(h.jsx)("div",{}),Object(h.jsx)("div",{}),Object(h.jsx)("div",{}),Object(h.jsx)("div",{}),Object(h.jsx)("div",{}),Object(h.jsx)("div",{}),Object(h.jsx)("div",{}),Object(h.jsx)("div",{})]})}),E=c(32),L=c.n(E),I="21286c9a3fca40f58e598a9082bc4f99",T=c(3),k=function(e){return e.map((function(e,t){var c={content:e.content||e.description||""};return Object(T.a)(Object(T.a)({id:t},e),c)}))},C="SET_FILTER_SOURCE",D="SET_FILTER_TITLE",P="GET_ARTICLES",R=function(e){return{type:P,payload:e}},F=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;return"https://newsapi.org/v2/top-headlines?page=".concat(e,"&language=en&pageSize=20&apiKey=").concat(I)};var A={setTitle:function(e){return function(t){t(function(e){return{type:D,payload:e}}(e))}},setSource:function(e){return function(t){t(function(e){return{type:C,payload:e}}(e))}},getArticles:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;return function(t){L.a.get(F(e)).then((function(e){var c=e.data,n=k(c.articles);t(R(n))}),(function(e){return t({type:"ERROR",payload:e})}))}}},U=Object(o.b)((function(e){return{store:e,articles:(t=e,t.articles)};var t}),A)((function(e){var t=e.store,c=e.setTitle,i=e.setSource,r=e.getArticles,s=Object(l.g)(),o=Object(l.h)().pathname,d=Object(l.f)(o,{path:"/:id"}),j=t.articles,u=t.filters,b=u.title,O=u.source;Object(n.useEffect)((function(){var e=new URLSearchParams;O?e.append("source",O):e.delete("source"),b?e.append("title",b):e.delete("title"),s.push({search:e.toString()})}),[O,b,s]),Object(n.useEffect)(r,[r]);var p,x,m=new Set(null===j||void 0===j?void 0:j.map((function(e){return e.source.name}))),v=O?j.filter((function(e){return e.source.name===O})):j,y=b?v.filter((function(e){return e.title.includes(b)})):v,E=(p=j,x=+(null===d||void 0===d?void 0:d.params.id),p.find((function(e){return e.id===x})));return t.error?Object(h.jsxs)("div",{children:["`Unable to load news = `",t.error]}):Object(h.jsxs)("div",{className:"app",children:[Object(h.jsxs)("header",{className:"header-nav",children:[Object(h.jsx)("nav",{children:Object(h.jsx)("ul",{children:Object(h.jsx)("li",{children:Object(h.jsx)(a.b,{to:"/",children:"Home"})})})}),Object(h.jsxs)("div",{className:"controls",children:[Object(h.jsx)(N,{list:Object(f.a)(m),label:"sources",selected:O,handler:i}),Object(h.jsx)(S,{handler:c,title:b})]})]}),Object(h.jsxs)(l.d,{children:[Object(h.jsxs)(l.b,{exact:!0,path:"/",children:[!t.isLoaded&&Object(h.jsx)(_,{}),t.isLoaded&&Object(h.jsx)(g,{list:y})]}),Object(h.jsx)(l.b,{exact:!0,path:"/404",children:Object(h.jsx)("h1",{children:"404: Page not found"})}),Object(h.jsxs)(l.b,{path:"/:id",children:[!t.isLoaded&&Object(h.jsx)(_,{}),t.isLoaded&&E&&Object(h.jsx)(w,{item:E,handler:function(){s.push("/")}}),t.isLoaded&&!E&&Object(h.jsx)(l.a,{to:"/404"})]}),Object(h.jsx)(l.b,{children:Object(h.jsx)(l.a,{to:"/404"})})]})]})})),X=function(e){e&&e instanceof Function&&c.e(3).then(c.bind(null,78)).then((function(t){var c=t.getCLS,n=t.getFID,i=t.getFCP,r=t.getLCP,s=t.getTTFB;c(e),n(e),i(e),r(e),s(e)}))},B=c(15),H=c(33),J={articles:[],filters:{title:"",source:""},isLoaded:!1,error:null},M=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:J,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case C:return Object(T.a)(Object(T.a)({},e),{},{filters:Object(T.a)(Object(T.a)({},e.filters),{},{source:t.payload})});case D:return Object(T.a)(Object(T.a)({},e),{},{filters:Object(T.a)(Object(T.a)({},e.filters),{},{title:t.payload})});case P:return Object(T.a)(Object(T.a)({},e),{},{articles:Object(f.a)(t.payload),isLoaded:!0});default:return e}};function V(e){return window.history.pushState?new URLSearchParams(window.location.search).get(e):""}var z=function(e){var t=[H.a],c=("object"===typeof window&&window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__?window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__({}):B.b)(B.a.apply(void 0,t));return Object(B.c)(M,e||{},c)}({articles:[],filters:{title:V("title")?V("title"):"",source:V("source")?V("source"):""},isLoaded:!1});s.a.render(Object(h.jsx)(i.a.StrictMode,{children:Object(h.jsx)(a.a,{children:Object(h.jsx)(l.b,{children:Object(h.jsx)(p,{children:Object(h.jsx)(o.a,{store:z,children:Object(h.jsx)(U,{})})})})})}),document.getElementById("root")),X()}},[[77,1,2]]]);
//# sourceMappingURL=main.a316781f.chunk.js.map