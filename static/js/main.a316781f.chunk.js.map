{"version":3,"sources":["utils/ErrorBoundary.js","utils/dateOptions.js","utils/parseTitle.js","components/NewsListItem/index.js","components/NewsListItem/NewsListItem.js","components/NewsList/index.js","components/NewsList/NewsList.js","components/NewsArticle/index.js","components/NewsArticle/NewsArticle.js","components/DropDown/DropDown.js","components/DropDown/index.js","components/Input/index.js","components/Input/Input.js","components/Spinner/index.js","components/Spinner/Spinner.js","KEY.js","utils/prepareArticles.js","store/actions.js","store/actionCreators.js","store/thunks.js","App.js","store/selectors.js","reportWebVitals.js","store/reducers.js","index.js","store/index.js"],"names":["ErrorBoundary","props","state","hasError","this","JSON","stringify","children","error","Component","defaultProps","weekday","year","month","day","string","split","slice","join","NewsListItem","item","clickHandler","url","className","src","urlToImage","alt","parseTitle","title","source","name","dateTime","publishedAt","Date","toLocaleString","dateOptions","description","href","onClick","e","preventDefault","NewsList","list","history","useHistory","length","map","push","id","handler","width","content","type","DropDown","label","selected","parsedLabel","value","onChange","target","Input","placeholder","Spinner","prepareArticles","articles","article","i","stubContent","SET_FILTER_SOURCE","SET_FILTER_TITLE","GET_ARTICLES","getArticlesCreator","payload","page","KEY","mapDispatchToProps","setTitle","dispatch","setTitleFilterCreator","setSource","setSourceFilterCreator","getArticles","axios","get","then","data","readyArticles","err","connect","store","pathname","useLocation","match","matchPath","path","filters","useEffect","params","URLSearchParams","append","delete","search","toString","arr","uniqueSources","Set","articlesBySource","filter","a","articlesByTitleAndSource","includes","selectedArticle","find","to","exact","isLoaded","reportWebVitals","onPerfEntry","Function","getCLS","getFID","getFCP","getLCP","getTTFB","initialState","action","getUrlParam","key","window","pushState","location","middleware","thunk","enhancer","__REDUX_DEVTOOLS_EXTENSION_COMPOSE__","compose","applyMiddleware","createStore","rootReducer","ReactDOM","render","StrictMode","document","getElementById"],"mappings":"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","file":"static/js/main.a316781f.chunk.js","sourcesContent":["import { React, Component } from 'react';\nimport PropTypes from 'prop-types';\n\nclass ErrorBoundary extends Component {\n  constructor(props) {\n    super(props);\n    this.state = { hasError: false };\n  }\n\n  static getDerivedStateFromError(error) {\n    // Update state so the next render will show the fallback UI.\n    return { hasError: true, error };\n  }\n\n  componentDidCatch(\n    //  error, info\n  ) {\n    // You can also log the error to an error reporting service\n  }\n\n  render() {\n    const { props, state } = this;\n    if (state.hasError) {\n      // You can render any custom fallback UI\n      return (\n        <>\n          <h1>Sorry, something went wrong</h1>\n          <pre>{JSON.stringify(state)}</pre>\n        </>\n      );\n    }\n    return props.children;\n  }\n}\n\nErrorBoundary.propTypes = {\n  children: PropTypes.element,\n};\n\nErrorBoundary.defaultProps = {\n  children: [],\n};\n\nexport default ErrorBoundary;\n","export default {\n  weekday: 'long', year: 'numeric', month: 'short', day: 'numeric',\n};\n","export default (string) => string.split(' - ').slice(0, 1).join('');\n","import NewsListItem from './NewsListItem';\n\nexport default NewsListItem;\n","import { React } from 'react';\nimport { PropTypes } from 'prop-types';\nimport dateOptions from '../../utils/dateOptions';\nimport parseTitle from '../../utils/parseTitle';\nimport './NewsListItem.css';\n\nconst NewsListItem = ({ item, clickHandler, url }) => (\n  <>\n    <li className=\"NewsListItem\">\n      <article>\n        <div className=\"NewsListItem__image-large\">\n          <img\n            src={item.urlToImage || 'https://upload.wikimedia.org/wikipedia/commons/6/65/No-Image-Placeholder.svg'}\n            alt=\"\"\n            data-testid=\"img1\"\n          />\n        </div>\n        <div className=\"NewsListItem__details\">\n          <div className=\"NewsListItem__image-small\">\n            <img\n              src={item.urlToImage || 'https://upload.wikimedia.org/wikipedia/commons/6/65/No-Image-Placeholder.svg'}\n              alt=\"\"\n              data-testid=\"img2\"\n            />\n            <h1>{parseTitle(item.title)}</h1>\n          </div>\n          <div className=\"NewsListItem__misc\">\n            <div>{item.source.name}</div>\n            <time dateTime={item.publishedAt}>\n              {(new Date(item.publishedAt)).toLocaleString('en-US', dateOptions)}\n            </time>\n          </div>\n          <p>{item.description}</p>\n          <a\n            href={url}\n            onClick={(e) => {\n              e.preventDefault();\n              clickHandler();\n            }}\n          >\n            Read more\n          </a>\n        </div>\n      </article>\n    </li>\n  </>\n);\n\nconst NewsShape = {\n  title: PropTypes.string.isRequired,\n  urlToImage: PropTypes.string,\n  publishedAt: PropTypes.string.isRequired,\n  description: PropTypes.string.isRequired,\n  source: PropTypes.shape({\n    name: PropTypes.string.isRequired,\n  }),\n};\n\nNewsListItem.propTypes = {\n  clickHandler: PropTypes.func.isRequired,\n  url: PropTypes.string.isRequired,\n  item: PropTypes.shape(NewsShape).isRequired,\n};\n\nexport default NewsListItem;\n","import NewsList from './NewsList';\n\nexport default NewsList;\n","import { React } from 'react';\nimport { PropTypes } from 'prop-types';\nimport { useHistory } from 'react-router-dom';\nimport NewsListItem from '../NewsListItem';\nimport './NewsList.css';\n\nconst NewsList = ({ list }) => {\n  const history = useHistory();\n  return (\n    <ul className=\"NewsList\">\n      {list.length !== 0 && list.map((item) => (\n        <NewsListItem\n          item={item}\n          key={item.publishedAt + item.title}\n          clickHandler={() => { history.push(`/${item.id}`); }}\n          url={`/${item.id}`}\n        />\n      ))}\n      {!list.length\n        && <div data-testid=\"no-articles\">No articles found.</div>}\n    </ul>\n  );\n};\n\nNewsList.propTypes = {\n  list: PropTypes.arrayOf(PropTypes.object).isRequired,\n};\n\nexport default NewsList;\n","import NewsList from './NewsArticle';\n\nexport default NewsList;\n","import { React } from 'react';\nimport { PropTypes } from 'prop-types';\nimport dateOptions from '../../utils/dateOptions';\nimport parseTitle from '../../utils/parseTitle';\nimport './NewsArticle.css';\n\nconst NewsArticle = ({ item, handler }) => (\n  <article className=\"NewsArticle\">\n    <h1>{parseTitle(item.title)}</h1>\n    <img src={item.urlToImage || 'https://upload.wikimedia.org/wikipedia/commons/6/65/No-Image-Placeholder.svg'} alt=\"\" width=\"25%\" data-testid=\"img\" />\n    <div>\n      {(new Date(item.publishedAt)).toLocaleString('en-US', dateOptions)}\n    </div>\n    <div>{item.source.name}</div>\n    <p>{item.content}</p>\n    <button onClick={handler} type=\"button\">Back</button>\n  </article>\n);\n\nconst ArticleShape = {\n  title: PropTypes.string.isRequired,\n  urlToImage: PropTypes.string,\n  publishedAt: PropTypes.string.isRequired,\n  description: PropTypes.string.isRequired,\n  content: PropTypes.string.isRequired,\n  source: PropTypes.shape({\n    name: PropTypes.string.isRequired,\n  }),\n};\n\nNewsArticle.propTypes = {\n  handler: PropTypes.func.isRequired,\n  item: PropTypes.shape(ArticleShape).isRequired,\n};\n\nexport default NewsArticle;\n","import { PropTypes } from 'prop-types';\nimport './DropDown.css';\n\nconst DropDown = ({\n  list, label, handler, selected,\n}) => {\n  const parsedLabel = label;\n  return (\n    <div className=\"DropDown\">\n      <select\n        value={selected}\n        name={parsedLabel}\n        onChange={(e) => {\n          handler(e.target.value);\n        }}\n        data-testid=\"select\"\n      >\n        <optgroup>\n          {['', ...list].map((name) => (\n            <option key={name} value={name}>\n              {name && name}\n              {!name && 'Choose source...'}\n            </option>\n          ))}\n        </optgroup>\n      </select>\n      {selected && (\n        <button\n          type=\"button\"\n          title=\"Clear source\"\n          onClick={() => {\n            handler('');\n          }}\n        >\n          🗙\n        </button>\n      )}\n    </div>\n  );\n};\n\nDropDown.propTypes = {\n  list: PropTypes.arrayOf(PropTypes.string).isRequired,\n  label: PropTypes.string.isRequired,\n  selected: PropTypes.string,\n  handler: PropTypes.func.isRequired,\n};\n\nDropDown.defaultProps = {\n  selected: '',\n};\n\nexport default DropDown;\n","import DropDown from './DropDown';\n\nexport default DropDown;\n","import Input from './Input';\n\nexport default Input;\n","import { PropTypes } from 'prop-types';\nimport './Input.css';\n\nconst Input = ({ handler, title }) => (\n  <div className=\"Input\">\n    <input\n      onChange={(e) => { handler(e.target.value); }}\n      type=\"text\"\n      value={title}\n      placeholder=\"Search by title\"\n      data-testid=\"input\"\n    />\n    {title\n      && (\n        <button\n          type=\"button\"\n          title=\"Clear input\"\n          onClick={() => {\n            handler('');\n          }}\n        >\n          🗙\n        </button>\n      )}\n  </div>\n);\n\nInput.propTypes = {\n  title: PropTypes.string.isRequired,\n  handler: PropTypes.func.isRequired,\n};\n\nexport default Input;\n","import Spinner from './Spinner';\n\nexport default Spinner;\n","import './Spinner.css';\n\nexport default () => (\n  <div className=\"lds-default\">\n    <div />\n    <div />\n    <div />\n    <div />\n    <div />\n    <div />\n    <div />\n    <div />\n    <div />\n    <div />\n    <div />\n    <div />\n  </div>\n);\n","export default '21286c9a3fca40f58e598a9082bc4f99';\n","const prepareArticles = (articles) => (\n  articles.map((article, i) => {\n    const stubContent = {\n      content: article.content || article.description || '',\n    };\n    return ({ id: i, ...article, ...stubContent });\n  })\n);\n\nexport default prepareArticles;\n","export const SET_FILTER_SOURCE = 'SET_FILTER_SOURCE';\n\nexport const SET_FILTER_TITLE = 'SET_FILTER_TITLE';\n\nexport const GET_ARTICLES = 'GET_ARTICLES';\n","import {\n  SET_FILTER_SOURCE,\n  SET_FILTER_TITLE,\n  GET_ARTICLES,\n} from './actions';\n\nconst setSourceFilterCreator = (source) => ({\n  type: SET_FILTER_SOURCE,\n  payload: source,\n});\n\nconst setTitleFilterCreator = (title) => ({\n  type: SET_FILTER_TITLE,\n  payload: title,\n});\n\nconst getArticlesCreator = (articles) => ({\n  type: GET_ARTICLES,\n  payload: articles,\n});\n\nexport {\n  setSourceFilterCreator,\n  setTitleFilterCreator,\n  getArticlesCreator,\n};\n","import axios from 'axios';\nimport KEY from '../KEY';\nimport prepareArticles from '../utils/prepareArticles';\nimport {\n  setSourceFilterCreator,\n  setTitleFilterCreator,\n  getArticlesCreator,\n} from './actionCreators';\n\nconst url = (page = 1) => `https://newsapi.org/v2/top-headlines?page=${page}&language=en&pageSize=20&apiKey=${KEY}`;\n\nconst getArticles = (page = 1) => (dispatch) => {\n  axios.get(url(page)).then(\n    ({ data }) => {\n      const readyArticles = prepareArticles(data.articles);\n      dispatch(getArticlesCreator(readyArticles));\n    },\n    (err) => dispatch({ type: 'ERROR', payload: err }),\n  );\n};\n\nconst setTitleFilter = (title) => (dispatch) => {\n  dispatch(setTitleFilterCreator(title));\n};\n\nconst setSourceFilter = (source) => (dispatch) => {\n  dispatch(setSourceFilterCreator(source));\n};\n\nexport {\n  getArticles,\n  setTitleFilter,\n  setSourceFilter,\n};\n","import {\n  React,\n  useEffect,\n} from 'react';\nimport {\n  Switch,\n  Route,\n  Link,\n  Redirect,\n  useLocation,\n  matchPath,\n  useHistory,\n} from 'react-router-dom';\nimport PropTypes from 'prop-types';\nimport { connect } from 'react-redux';\n\nimport './App.css';\nimport NewsList from './components/NewsList';\nimport NewsArticle from './components/NewsArticle';\nimport DropDown from './components/DropDown';\nimport Input from './components/Input';\nimport Spinner from './components/Spinner';\nimport { storeSelector, articlesSelector } from './store/selectors';\nimport { setSourceFilter, setTitleFilter, getArticles } from './store/thunks';\n\nconst ArticleById = (arr, id) => {\n  const result = arr.find((article) => article.id === id);\n  return result;\n};\n\nfunction App({\n  // eslint-disable-next-line no-shadow\n  store, setTitle, setSource, getArticles,\n}) {\n  const history = useHistory();\n  const location = useLocation();\n  const { pathname } = location;\n  const match = matchPath(pathname, { path: '/:id' });\n  const { articles, filters } = store;\n  const { title, source } = filters;\n\n  useEffect(() => {\n    const params = new URLSearchParams();\n    if (source) {\n      params.append('source', source);\n    } else {\n      params.delete('source');\n    }\n\n    if (title) {\n      params.append('title', title);\n    } else {\n      params.delete('title');\n    }\n\n    history.push({ search: params.toString() });\n  }, [source, title, history]);\n\n  useEffect(getArticles, [getArticles]);\n\n  const uniqueSources = new Set(articles?.map((item) => item.source.name));\n\n  const articlesBySource = !source ? articles\n    : articles.filter((a) => a.source.name === source);\n\n  const articlesByTitleAndSource = !title ? articlesBySource\n    : articlesBySource.filter((a) => a.title.includes(title));\n\n  const selectedArticle = ArticleById(articles, +match?.params.id);\n\n  if (store.error) {\n    return (\n      <div>\n        `Unable to load news = `\n        {store.error}\n      </div>\n    );\n  }\n\n  return (\n    <div className=\"app\">\n      <header className=\"header-nav\">\n        <nav>\n          <ul>\n            <li>\n              <Link to=\"/\">Home</Link>\n            </li>\n          </ul>\n        </nav>\n        <div className=\"controls\">\n          <DropDown list={[...uniqueSources]} label=\"sources\" selected={source} handler={setSource} />\n          <Input handler={setTitle} title={title} />\n        </div>\n      </header>\n      <Switch>\n        <Route exact path=\"/\">\n          {!store.isLoaded && <Spinner />}\n          {store.isLoaded && <NewsList list={articlesByTitleAndSource} />}\n        </Route>\n        <Route exact path=\"/404\">\n          <h1>404: Page not found</h1>\n        </Route>\n        <Route path=\"/:id\">\n          {!store.isLoaded && <Spinner />}\n          {store.isLoaded && selectedArticle\n            && (\n              <NewsArticle\n                item={selectedArticle}\n                handler={() => { history.push('/'); }}\n              />\n            )}\n          {store.isLoaded && !selectedArticle\n            && <Redirect to=\"/404\" />}\n        </Route>\n        <Route>\n          <Redirect to=\"/404\" />\n        </Route>\n      </Switch>\n    </div>\n  );\n}\n\nconst storeShape = {\n  articles: PropTypes.arrayOf(PropTypes.object).isRequired,\n  filters: PropTypes.shape({\n    title: PropTypes.string,\n    source: PropTypes.string,\n  }).isRequired,\n  isLoaded: PropTypes.bool.isRequired,\n};\n\nApp.propTypes = {\n  store: PropTypes.shape(storeShape).isRequired,\n  setTitle: PropTypes.func.isRequired,\n  setSource: PropTypes.func.isRequired,\n  getArticles: PropTypes.func.isRequired,\n  articles: PropTypes.arrayOf(PropTypes.object).isRequired,\n};\n\nconst mapStateToProps = (state) => ({\n  store: storeSelector(state),\n  articles: articlesSelector(state),\n});\n\nconst mapDispatchToProps = {\n  setTitle: setTitleFilter,\n  setSource: setSourceFilter,\n  getArticles,\n};\n\nexport default connect(mapStateToProps, mapDispatchToProps)(App);\n","export const storeSelector = (store) => store;\n\nexport const articlesSelector = (store) => store.articles;\n\nexport const filtersSelector = (store) => store.filters;\n","const reportWebVitals = (onPerfEntry) => {\n  if (onPerfEntry && onPerfEntry instanceof Function) {\n    import('web-vitals').then(({\n      getCLS, getFID, getFCP, getLCP, getTTFB,\n    }) => {\n      getCLS(onPerfEntry);\n      getFID(onPerfEntry);\n      getFCP(onPerfEntry);\n      getLCP(onPerfEntry);\n      getTTFB(onPerfEntry);\n    });\n  }\n};\n\nexport default reportWebVitals;\n","import {\n  SET_FILTER_SOURCE,\n  SET_FILTER_TITLE,\n  GET_ARTICLES,\n} from './actions';\n\nconst initialState = {\n  articles: [],\n  filters: {\n    title: '',\n    source: '',\n  },\n  isLoaded: false,\n  error: null,\n};\n\nexport default (state = initialState, action) => {\n  switch (action.type) {\n    case SET_FILTER_SOURCE:\n      return {\n        ...state,\n        filters: {\n          ...state.filters,\n          source: action.payload,\n        },\n      };\n    case SET_FILTER_TITLE:\n      return {\n        ...state,\n        filters: {\n          ...state.filters,\n          title: action.payload,\n        },\n      };\n    case GET_ARTICLES: {\n      return {\n        ...state,\n        articles: [...action.payload],\n        isLoaded: true,\n      };\n    }\n    default:\n      return state;\n  }\n};\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport { BrowserRouter as Router, Route } from 'react-router-dom';\nimport { Provider } from 'react-redux';\nimport ErrorBoundry from './utils/ErrorBoundary';\nimport './index.css';\nimport App from './App';\nimport reportWebVitals from './reportWebVitals';\nimport createStore from './store';\n\nfunction getUrlParam(key) {\n  if (window.history.pushState) {\n    const searchParams = new URLSearchParams(window.location.search);\n    return searchParams.get(key);\n  }\n\n  return '';\n}\n\nconst store = createStore({\n  articles: [],\n  filters: {\n    title: getUrlParam('title') ? getUrlParam('title') : '',\n    source: getUrlParam('source') ? getUrlParam('source') : '',\n  },\n  isLoaded: false,\n});\n\nReactDOM.render(\n  <React.StrictMode>\n    <Router>\n      <Route>\n        <ErrorBoundry>\n          <Provider store={store}>\n            <App />\n          </Provider>\n        </ErrorBoundry>\n      </Route>\n    </Router>\n  </React.StrictMode>,\n  document.getElementById('root'),\n);\n\n// If you want to start measuring performance in your app, pass a function\n// to log results (for example: reportWebVitals(console.log))\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\nreportWebVitals();\n","import { createStore, applyMiddleware, compose } from 'redux';\nimport thunk from 'redux-thunk';\n\nimport rootReducer from './reducers';\n\nexport default (initialState) => {\n  const middleware = [thunk];\n\n  const composeEnhancers = (\n    typeof window === 'object' && window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__\n  )\n    ? window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__({})\n    : compose;\n\n  const enhancer = composeEnhancers(applyMiddleware(...middleware));\n\n  const store = createStore(rootReducer, initialState || {}, enhancer);\n\n  return store;\n};\n"],"sourceRoot":""}